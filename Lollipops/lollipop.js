const lollipopCards = [{
    image: 'https://cdn1.bigcommerce.com/server4800/c97c4/products/511/images/1340/JR_Pops_-_Cherry_bulk_W__60551.1648114241.1280.1280.jpg?c=2',
    title: 'Cherry Lollipop',
    description: 'Sweet and tangy cherry-flavored lollipop.',
    price: "$40"
  },
  {
    image: 'https://filebroker-cdn.lazada.co.id/kf/S1fdbcec90688433bbd99297b8e66eff9v.jpg',
    title: 'Strawberry Lollipop',
    description: 'Delicious strawberry-flavored lollipop.',
    price: "$20"
  },
  {
    image: 'https://ebbenznorasweets.co.uk/cdn/shop/files/50636681add28ddce65f3acc58e42859.jpg?v=1708614734',
    title: 'Blueberry Lollipop',
    description: 'Juicy blueberry flavor in a fun lollipop.',
    price: "$57"
  },
  {
    image: 'https://www.ohnuts.com/noapp/showImage.cfm/zoom/Whirly-COLORS-Purple-Display.jpg',
    title: 'Grape Lollipop',
    description: 'Citrusy cards lollipop with a tangy twist.',
    price: "$49"
  },
  {
    image: 'https://m.media-amazon.com/images/I/71g+cK2WqzL._AC_UF1000,1000_QL80_.jpg',
    title: 'Watermelon Lollipop',
    description: 'Refreshing watermelon-flavored lollipop.',
    price: "$37"
  },
  {
    image: 'https://64.media.tumblr.com/8d0c06a3cd21662d97f64a31f213b237/tumblr_p921alQxvf1x7zaduo1_1280.jpg',
    title: 'Lemon Lollipop',
    description: 'Zesty lemon-flavored lollipop.',
    price: "$27"
  },
  {
    image: 'https://m.media-amazon.com/images/I/71Dmm7Z0TcL.jpg',
    title: 'Grape Lollipop',
    description: 'Rich grape flavor in a classic lollipop.',
    price: "$47"
  },
  {
    image: 'https://cdn11.bigcommerce.com/s-djdgc512d4/images/stencil/1280x1280/products/1557/2303/square_document_for_dini_-_2024-09-07T233827.933__03606.1725767133.png?c=2',
    title: 'Apple Lollipop',
    description: 'Crunchy green apple-flavored lollipop.',
    price: "$60"
  },
  {
    image: 'https://www.ohnuts.com/noapp/showImage.cfm/zoom/_MG_4616.jpg',
    title: 'lollipop Lollipop',
    description: 'Fruity and tangy lollipop lollipop.',
    price: "$88"
  },
  {
    image: 'https://s.alicdn.com/@sc04/kf/H01264b54da814a53a7d5d1fea8c2ca3al.jpg',
    title: 'Pineapple Lollipop',
    description: 'Tropical pineapple-flavored lollipop.',
    price: "$19"
  },
  {
    image: 'https://fooddrinkinnovations.com/wp-content/uploads/2024/05/Alpenliebe-lollipop_fooddrinkinnovations.jpg',
    title: 'Mango Lollipop',
    description: 'Exotic mango-flavored lollipop.',
    price: "$49"
  },
  {
    image: 'https://rukminim2.flixcart.com/image/850/1000/xif0q/candy-mouth-freshener/g/7/o/120-fresh-1-chupa-chups-original-imaghfvcgzztevxa.jpeg?q=90&crop=false',
    title: 'Cola Lollipop',
    description: 'Classic cola-flavored lollipop.',
    price: "$12"
  },
  {
    image: 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjSExY78r2A1dbxfZJxd8Zg43Qjonm63CCxqH_y2tGizbiTL_khnrwx8FRjnqqi76ISrjAKEL9Wkt8CQ0gEp8XQUN7bKT8cN_lT6P-3kLfOulN9ArMRm7-TJDJiyy9CF20A5wLNF66_Da0/s1600/2.jpg',
    title: 'Pops ups Lollipop',
    description: 'Sweet poppings fruit flavored lollipop.',
    price: "$88"
  },
  {
    image: 'https://5.imimg.com/data5/SELLER/Default/2023/2/RF/OR/VM/94458223/banana-candy-lollipop-500x500.jpg',
    title: 'Banana Lollipop',
    description: 'Creamy banana-flavored lollipop.',
    price: "$30"
  },
  {
    image: 'https://cdn11.bigcommerce.com/s-6d68e/images/stencil/1280x1280/products/7135/9061/Party_Delight_24_Lollipop_Display_unit_Black__05063.1726378949.jpg?c=2',
    title: 'Blackcurrant Lollipop',
    description: 'Intense blackcurrant flavor in a lollipop.',
    price: "$70"
  },
  {
    image: 'https://www.kenyasweets.com/wp-content/uploads/2021/09/TM_lolli_20_Pcs-removebg-preview.png',
    title: 'Mint Lollipop',
    description: 'Refreshing mint-flavored lollipop.',
    price: "$50"
  },
  {
    image: 'https://www.bigbasket.com/media/uploads/p/xxl/1224706-8_1-chupa-chups-bubble-gum-filled-lollipop-assorted-flavour.jpg',
    title: 'Bubblegum Lollipop',
    description: 'Classic bubblegum-flavored lollipop.',
    price: "$99"
  },
  {
    image: 'https://cdn11.bigcommerce.com/s-l81y4t74uz/images/stencil/1280x1280/products/1552/2549/charms_fluffy_stuff_cotton_candy_pops_T__33221.1633178666.jpg?c=2',
    title: 'Cotton Candy Lollipop',
    description: 'Sweet cotton candy flavor in a lollipop.',
    price: "$70"
  },
  {
    image: 'https://w7.pngwing.com/pngs/219/230/png-transparent-lollipop-chupa-chups-flavor-tutti-frutti-strawberry-lollipop-united-kingdom-lollipop-fruit-thumbnail.png',
    title: 'Tutti Frutti Lollipop',
    description: 'Mixed fruity flavors in a fun lollipop.',
    price: "$99"
  }
];

let span = document.getElementById("count")
let lollipop = document.getElementById("cardContainer");
lollipop.style.display = "flex";
lollipop.style.flexWrap = "wrap";
lollipop.style.gap = "20px";
lollipop.style.justifyContent = "center";
let totalItems = JSON.parse(localStorage.getItem("totalItems")) || 0;
span.textContent = `${totalItems}`

function addToCart(index) {
  let cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];

  let found = false;

  for (let i = 0; i < cartItems.length; i++) {
    if (cartItems[i].title === lollipopCards[index].title) {
      cartItems[i].count += 1;
      found = true;
      break;
    }
  }

  if (!found) {
    cartItems.push({
      ...lollipopCards[index],
      count: 1,
    });
  }
  totalItems++
  span.textContent = totalItems
  localStorage.setItem("cartItems", JSON.stringify(cartItems));
  localStorage.setItem("totalItems", JSON.stringify(totalItems));
}

lollipopCards.forEach((item, index) => {
  let candy = document.createElement("div");
  candy.classList.add("candy-card");

  candy.innerHTML = `
    <img src="${item.image}" alt="${item.title}" />
    <h4>${item.title}</h4>
    <p>${item.description}</p>
    <span>${item.price}</span>
    <button class="add-to-cart">Add to Cart</button>
    <button class="buy-now">Buy Now</button>
  `;

  lollipop.appendChild(candy);

  candy.querySelector(".add-to-cart").addEventListener("click", (e) => {
    e.stopImmediatePropagation();
    addToCart(index);
    Swal.fire({
      text: "The item has been successfully added to your cart.",
      icon: "success",
      timer: 1500,
      showConfirmButton: false
    });
  });

  candy.querySelector(".buy-now").addEventListener("click", (e) => {
    e.stopPropagation();
    window.location.href = "../Addtocart/cart.html";
  });

  candy.addEventListener("click", () => {
    localStorage.setItem("eachItem", JSON.stringify(item));
    window.location.href = "../Singlecard_page/eachitem.html";
  });
});
